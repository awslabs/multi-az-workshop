# ~~ Generated by projen. To modify, edit .projenrc.ts and run "npx projen".

name: auto-queue
on:
  workflow_run:
    workflows: [build]
    types:
      - completed

env:
  GH_TOKEN: ${{ github.token }}

jobs:
  enableAutoQueue:
    name: "Set AutoQueue on PR #${{ github.event.number }}"
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
      contents: write
    steps:
      - name: Download PR Number Artifact
        uses: actions/download-artifact@v3
        with:
          name: pr-number

      - name: Read PR Number
        id: read_pr
        run: echo "PR_NUMBER=$(cat pr_number.txt)" >> $GITHUB_ENV

      - uses: peter-evans/enable-pull-request-automerge@v3
        with:
          token: ${{ env.GH_TOKEN }}
          pull-request-number: ${{ env.PR_NUMBER }}
          merge-method: squash