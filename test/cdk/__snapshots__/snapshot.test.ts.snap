// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing

exports[`CloudFormation Template Snapshot stack matches snapshot 1`] = `
{
  "Parameters": {
    "AssetsBucketName": {
      "Default": "{{.AssetsBucketName}}",
      "MinLength": 1,
      "Type": "String",
    },
    "AssetsBucketPrefix": {
      "Default": "{{.AssetsBucketPrefix}}",
      "Type": "String",
    },
    "BootstrapVersion": {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
    "ParticipantRoleName": {
      "Default": "{{.ParticipantRoleName}}",
      "Type": "String",
    },
  },
  "Resources": {
    "alb8A8B13C2": {
      "Properties": {
        "LoadBalancerAttributes": [
          {
            "Key": "deletion_protection.enabled",
            "Value": "false",
          },
          {
            "Key": "routing.http2.enabled",
            "Value": "true",
          },
          {
            "Key": "zonal_shift.config.enabled",
            "Value": "true",
          },
        ],
        "Scheme": "internal",
        "SecurityGroups": [
          {
            "Fn::GetAtt": [
              "albsecuritygroup4B3C20F7",
              "GroupId",
            ],
          },
        ],
        "Subnets": [
          {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef",
            ],
          },
          {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref",
            ],
          },
          {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref",
            ],
          },
        ],
        "Type": "application",
      },
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
    },
    "albhttplistener94AA0D76": {
      "DependsOn": [
        "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7",
      ],
      "Properties": {
        "DefaultActions": [
          {
            "TargetGroupArn": {
              "Fn::GetAtt": [
                "ec2NestedStackec2NestedStackResourceD77757F5",
                "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3Ref",
              ],
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": {
          "Ref": "alb8A8B13C2",
        },
        "Port": 80,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "albsecuritygroup4B3C20F7": {
      "Properties": {
        "GroupDescription": "SnapshotTestStack/alb-security-group",
        "SecurityGroupEgress": [
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": [
          {
            "CidrIp": {
              "Fn::GetAtt": [
                "networkNestedStacknetworkNestedStackResource8842CEE2",
                "Outputs.SnapshotTestStacknetworkvpcC5222FE1CidrBlock",
              ],
            },
            "Description": {
              "Fn::Join": [
                "",
                [
                  "from ",
                  {
                    "Fn::GetAtt": [
                      "networkNestedStacknetworkNestedStackResource8842CEE2",
                      "Outputs.SnapshotTestStacknetworkvpcC5222FE1CidrBlock",
                    ],
                  },
                  ":80",
                ],
              ],
            },
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
          {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 80",
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
        ],
        "VpcId": {
          "Fn::GetAtt": [
            "networkNestedStacknetworkNestedStackResource8842CEE2",
            "Outputs.SnapshotTestStacknetworkvpcC5222FE1Ref",
          ],
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "azmapperAvailabilityZoneMapper3A75675D": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "AvailabilityZones": [
          {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "AWS::Region",
                },
                "a",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "AWS::Region",
                },
                "b",
              ],
            ],
          },
          {
            "Fn::Join": [
              "",
              [
                {
                  "Ref": "AWS::Region",
                },
                "c",
              ],
            ],
          },
        ],
        "ServiceToken": {
          "Fn::GetAtt": [
            "azmapperAvailabilityZoneMapperFunctionCB77A9F4",
            "Arn",
          ],
        },
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
    "azmapperAvailabilityZoneMapperFunctionCB77A9F4": {
      "DependsOn": [
        "azmapperexecutionRoleDefaultPolicyF1136941",
        "azmapperexecutionRoleD843D7A1",
      ],
      "Properties": {
        "Architectures": [
          "arm64",
        ],
        "Code": {
          "ZipFile": "# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0
import urllib3
import json
import os
import boto3

SUCCESS = "SUCCESS"
FAILED = "FAILED"
http = urllib3.PoolManager()
region = os.environ.get("AWS_REGION")
ec2 = boto3.client('ec2', region_name = region)

def handler(event, context):
  try:
    print(event)
    if event['RequestType'] == 'Delete':
      sendResponse(event, context, SUCCESS, {})
      return
  
    zone_names=[]
    if 'ResourceProperties' in event and 'AvailabilityZones' in event['ResourceProperties'] and event['ResourceProperties']['AvailabilityZones'] != '':   
      zone_names = event['ResourceProperties']['AvailabilityZones']
      
    in_use_azs = ec2.describe_availability_zones(Filters=[ { 'Name': 'zone-type', 'Values': [ 'availability-zone'] } ], ZoneNames = zone_names)
    all_azs = ec2.describe_availability_zones(Filters=[ { 'Name': 'zone-type', 'Values': [ 'availability-zone'] } ])
  
    az_map = {}

    biggest_letter = sorted([x["ZoneName"][-1] for x in all_azs["AvailabilityZones"]], reverse=True)[0]
    biggest_number = int(sorted([x["ZoneId"][-1] for x in all_azs["AvailabilityZones"]], reverse=True)[0])

    for code in range(ord('a'), ord(biggest_letter) + 1):
      az_map[chr(code)] = ""

    for num in range(1, biggest_number + 1):
      az_map["az" + str(num)] = ""
  
    # Supply the region and get its shorthand
    az_map[region] = all_azs["AvailabilityZones"][0]["ZoneId"].split("-")[0]
  
    # Get the in use availability zone Ids as comma delimited list
    az_map["InUseAvailabilityZoneIds"] = ",".join(x["ZoneId"] for x in in_use_azs["AvailabilityZones"])
  
    # Get the in use availability zone Ids as an array
    az_map["InUseAvailabilityZoneIdsArray"] = [x["ZoneId"] for x in in_use_azs["AvailabilityZones"]]
  
    # Get the in use availability zone names as comma delimited list
    az_map["InUseAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in in_use_azs["AvailabilityZones"])
  
    # Get the in use availability zone names as an array
    az_map["InUseAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in in_use_azs["AvailabilityZones"])
  
    # Make a comma delimited list of name to id joined with a colon
    az_map["InUseAvailabilityZoneNameToIdMap"] = ",".join(x["ZoneName"] + ":" + x["ZoneId"] for x in in_use_azs["AvailabilityZones"])
    
    # Make a comma delimited list of name to id joined with a colon for all AZs
    az_map["AllAvailabilityZoneNameToIdMap"] = ",".join(x["ZoneName"] + ":" + x["ZoneId"] for x in all_azs["AvailabilityZones"])
    
    # All availability zones in the region
    az_map["AllAvailabilityZoneIds"] = ",".join(x["ZoneId"] for x in all_azs["AvailabilityZones"])
    az_map["AllAvailabilityZoneIdsArray"] = [x["ZoneId"] for x in all_azs["AvailabilityZones"]]
    az_map["AllAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in all_azs["AvailabilityZones"])
    az_map["AllAvailabilityZoneNamesArray"] = [x["ZoneName"] for x in all_azs["AvailabilityZones"]]
    
    # Allow lookups for individual AZ names to Ids
    for item in all_azs['AvailabilityZones']:
      az_map[item['ZoneName']] = item['ZoneId']
      az_map[item['ZoneId']] = item['ZoneName']
      az_id = item['ZoneId'].split('-')[1].lower()
      az_map[az_id] = item['ZoneName']
      az_letter = item['ZoneName'][-1]
      az_map[az_letter] = item['ZoneId']
  
    print(json.dumps(az_map))
  
    sendResponse(event, context, SUCCESS, az_map)
  except Exception as e:
    print(e)
    sendResponse(event, context, FAILED, str(e))  
  return

def sendResponse(event, context, responseStatus, responseData, physicalResourceId=None, noEcho=False, reason=None):
  responseUrl = event['ResponseURL']
  print(responseUrl)
  responseBody = {
    'Status' : responseStatus,
    'Reason' : reason or "See the details in CloudWatch Log Stream: {}".format(context.log_stream_name),
    'PhysicalResourceId' : physicalResourceId or context.log_stream_name,
    'StackId' : event['StackId'],
    'RequestId' : event['RequestId'],
    'LogicalResourceId' : event['LogicalResourceId'],
    'NoEcho' : noEcho,
    'Data' : responseData
  }
  json_responseBody = json.dumps(responseBody, default=str)
  print("Response body:")
  print(json_responseBody)
  headers = {
    'content-type' : '',
    'content-length' : str(len(json_responseBody))
  }
  try:
    response = http.request('PUT', responseUrl, headers=headers, body=json_responseBody)
    print("Status code:", response.status)
  except Exception as e:
    print("send(...) failed executing http.request(..):", e)",
        },
        "Environment": {
          "Variables": {
            "PARTITION": {
              "Ref": "AWS::Partition",
            },
            "REGION": {
              "Ref": "AWS::Region",
            },
          },
        },
        "Handler": "index.handler",
        "MemorySize": 512,
        "Role": {
          "Fn::GetAtt": [
            "azmapperexecutionRoleD843D7A1",
            "Arn",
          ],
        },
        "Runtime": "python3.13",
        "Timeout": 20,
        "TracingConfig": {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "azmapperCloudWatchManagedPolicy4DB9211E": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "cloudwatch:PutMetricData",
              "Effect": "Allow",
              "Resource": "*",
            },
            {
              "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    {
                      "Ref": "azmapperLogGroupFAF47F6B",
                    },
                    ":*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Roles": [
          {
            "Ref": "azmapperexecutionRoleD843D7A1",
          },
        ],
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "azmapperEC2ManagedPolicyE9227710": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "ec2:DescribeAvailabilityZones",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "azmapperLogGroupFAF47F6B": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "LogGroupName": {
          "Fn::Join": [
            "",
            [
              "/aws/lambda/",
              {
                "Ref": "azmapperAvailabilityZoneMapperFunctionCB77A9F4",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "azmapperXrayManagedPolicyADF3EAEB": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
                "xray:GetSamplingRules",
                "xray:GetSamplingTargets",
                "xray:GetSamplingStatisticSummaries",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "azmapperexecutionRoleD843D7A1": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Ref": "azmapperXrayManagedPolicyADF3EAEB",
          },
          {
            "Ref": "azmapperEC2ManagedPolicyE9227710",
          },
        ],
        "Path": "/azmapper/",
      },
      "Type": "AWS::IAM::Role",
    },
    "azmapperexecutionRoleDefaultPolicyF1136941": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "azmapperexecutionRoleDefaultPolicyF1136941",
        "Roles": [
          {
            "Ref": "azmapperexecutionRoleD843D7A1",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "aztaggerNestedStackaztaggerNestedStackResource5BE7FF15": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/002d6f344757771fbbb41532ad86202ece7d85f3c0a36ef9c037aba4aab83ca9.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "basicserviceBasicServiceDashboard6473F47D": {
      "Properties": {
        "DashboardBody": {
          "Fn::Join": [
            "",
            [
              "{"start":"-PT1H","periodOverride":"auto","widgets":[{"type":"alarm","width":24,"height":2,"x":0,"y":0,"properties":{"title":"Zonal Impact Alarms","alarms":["",
              {
                "Fn::GetAtt": [
                  "basicserviceaisolatedimpactalarm74E4B266",
                  "Arn",
                ],
              },
              "","",
              {
                "Fn::GetAtt": [
                  "basicservicebisolatedimpactalarmDE0095CD",
                  "Arn",
                ],
              },
              "","",
              {
                "Fn::GetAtt": [
                  "basicservicecisolatedimpactalarm0B047C13",
                  "Arn",
                ],
              },
              ""]}},{"type":"text","width":24,"height":1,"x":0,"y":2,"properties":{"markdown":"## **Load Balancer Metrics**","background":"transparent"}},{"type":"metric","width":8,"height":8,"x":0,"y":3,"properties":{"view":"timeSeries","title":"Success Count","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"FILL(a1, 0) + FILL(a2, 0) + FILL(a3, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_ELB_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a1"}],["AWS/ApplicationELB","HTTPCode_Target_2XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a2"}],["AWS/ApplicationELB","HTTPCode_Target_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a3"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"FILL(b1, 0) + FILL(b2, 0) + FILL(b3, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_ELB_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b1"}],["AWS/ApplicationELB","HTTPCode_Target_2XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b2"}],["AWS/ApplicationELB","HTTPCode_Target_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b3"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"FILL(c1, 0) + FILL(c2, 0) + FILL(c3, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_ELB_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c1"}],["AWS/ApplicationELB","HTTPCode_Target_2XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c2"}],["AWS/ApplicationELB","HTTPCode_Target_3XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c3"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":8,"y":3,"properties":{"view":"timeSeries","title":"Target 5xx Count","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"FILL(a0_faultcount, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a0_faultcount"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"FILL(b0_faultcount, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b0_faultcount"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"FILL(c0_faultcount, 0)","period":60}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c0_faultcount"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":16,"y":3,"properties":{"view":"timeSeries","title":"ELB 5xx Count","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"FILL(a, 0)"}],["AWS/ApplicationELB","HTTPCode_ELB_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","stat":"Sum","visible":false,"id":"a"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"FILL(b, 0)"}],["AWS/ApplicationELB","HTTPCode_ELB_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","stat":"Sum","visible":false,"id":"b"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"FILL(c, 0)"}],["AWS/ApplicationELB","HTTPCode_ELB_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","stat":"Sum","visible":false,"id":"c"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":0,"y":11,"properties":{"view":"timeSeries","title":"Request Count","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":8,"y":11,"properties":{"view":"timeSeries","title":"Fault Rate","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"IF(za2 > 0, (za1/za2) * 100, 0)","period":60}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"FILL(a0_faultcount, 0)","period":60,"visible":false,"id":"za1"}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a0_faultcount"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"za2"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"IF(zb2 > 0, (zb1/zb2) * 100, 0)","period":60}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"FILL(b0_faultcount, 0)","period":60,"visible":false,"id":"zb1"}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b0_faultcount"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"zb2"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"IF(zc2 > 0, (zc1/zc2) * 100, 0)","period":60}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"FILL(c0_faultcount, 0)","period":60,"visible":false,"id":"zc1"}],["AWS/ApplicationELB","HTTPCode_Target_5XX_Count","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c0_faultcount"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"zc2"}]],"annotations":{"horizontal":[{"label":"High Severity","value":1,"color":"#d62728","yAxis":"left"}]},"yAxis":{"left":{"min":0,"label":"Percent","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":16,"y":11,"properties":{"view":"timeSeries","title":"Processed Bytes","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[["AWS/ApplicationELB","ProcessedBytes","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum"}],["AWS/ApplicationELB","ProcessedBytes","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum"}],["AWS/ApplicationELB","ProcessedBytes","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum"}]],"yAxis":{"left":{"min":0,"showUnits":false,"label":"Bytes"}}}},{"type":"metric","width":8,"height":8,"x":0,"y":19,"properties":{"view":"timeSeries","title":"Target Response Time (p99)","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"(((a0_latency * a0_requests)) / (a0_requests)) * 1000","period":60}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"a0_latency"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"(((b0_latency * b0_requests)) / (b0_requests)) * 1000","period":60}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"b0_latency"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"(((c0_latency * c0_requests)) / (c0_requests)) * 1000","period":60}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"c0_latency"}]],"annotations":{"horizontal":[{"label":"High Severity","value":500,"color":"#d62728","yAxis":"left"}]},"yAxis":{"left":{"min":0,"label":"Milliseconds","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":8,"y":19,"properties":{"view":"timeSeries","title":"Latency Z-Score (p99)","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"(a - AVG([b,c])) / STDDEV([b,c])","period":60}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"(((a0_latency * a0_requests)) / (a0_requests)) * 1000","period":60,"visible":false,"id":"a"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"a0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"a0_latency"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"(((b0_latency * b0_requests)) / (b0_requests)) * 1000","period":60,"visible":false,"id":"b"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"b0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"b0_latency"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"(((c0_latency * c0_requests)) / (c0_requests)) * 1000","period":60,"visible":false,"id":"c"}],["AWS/ApplicationELB","RequestCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"Sum","visible":false,"id":"c0_requests"}],["AWS/ApplicationELB","TargetResponseTime","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "",{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","period":60,"stat":"p99","visible":false,"id":"c0_latency"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"(b - AVG([a,c])) / STDDEV([a,c])","period":60}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"(c - AVG([a,b])) / STDDEV([a,b])","period":60}]],"annotations":{"horizontal":[{"label":"High Severity","value":3,"color":"#d62728","yAxis":"left"}]},"yAxis":{"left":{"min":0,"label":"Score","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":16,"y":19,"properties":{"view":"timeSeries","title":"Anomalous Hosts","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"a0+a1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a0"}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"b0+b1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b0"}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"c0+c1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c0"}],["AWS/ApplicationELB","AnomalousHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c1"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":0,"y":27,"properties":{"view":"timeSeries","title":"Mitigated Hosts","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"a0+a1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a0"}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"b0+b1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b0"}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"c0+c1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c0"}],["AWS/ApplicationELB","MitigatedHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c1"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}},{"type":"metric","width":8,"height":8,"x":8,"y":27,"properties":{"view":"timeSeries","title":"Healthy Hosts","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","metrics":[[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","color":"#1f77b4","expression":"a0+a1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a0"}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "a","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#1f77b4","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"a1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","color":"#ff7f0e","expression":"b0+b1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b0"}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "b","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#ff7f0e","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"b1"}],[{"label":"",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","color":"#2ca02c","expression":"c0+c1 + TIME_SERIES(0)","period":60}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "ec2NestedStackec2NestedStackResourceD77757F5",
                  "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c0"}],["AWS/ApplicationELB","HealthyHostCount","AvailabilityZone","",
              {
                "Ref": "AWS::Region",
              },
              "c","LoadBalancer","",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerFullName",
                ],
              },
              "","TargetGroup","",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupFullName",
                ],
              },
              "",{"color":"#2ca02c","label":"",
              {
                "Fn::GetAtt": [
                  "eksNestedStackeksNestedStackResource518D71CA",
                  "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8TargetGroupName",
                ],
              },
              " - ",
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "","region":"",
              {
                "Ref": "AWS::Region",
              },
              "","period":60,"stat":"Maximum","visible":false,"id":"c1"}]],"yAxis":{"left":{"min":0,"label":"Count","showUnits":false}}}}]}",
            ],
          ],
        },
        "DashboardName": {
          "Fn::Join": [
            "",
            [
              "wildrydes-per-az-health-",
              {
                "Ref": "AWS::Region",
              },
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::Dashboard",
    },
    "basicserviceaalbimpactcompositealarm0581A120": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-alb-impact-composite-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceacompositeimpactalarm8490970A",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicserviceacompositeimpactalarm8490970A": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerName",
                ],
              },
              "-latency-or-availability-impact",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "((ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceafaultratealarmB143907B",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicegavailabilityoutlieralarm21B8E187",
                  "Arn",
                ],
              },
              "")) OR (ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicealatencyalarm621FA27A",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicealatencyoutlieralarmC8324A93",
                  "Arn",
                ],
              },
              "")))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicserviceafaultratealarmB143907B": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-fault-rate",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(a1/a2)*100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-rate",
                ],
              ],
            },
          },
          {
            "Id": "a1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "a2",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicserviceaisolatedimpactalarm74E4B266": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-isolated-impact-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceaalbimpactcompositealarm0581A120",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicservicealatencyalarm621FA27A": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Id": "m1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0.5,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicealatencyoutlieralarmC8324A93": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(a - AVG([b,c])) / STDDEV([b,c])",
            "Id": "expr_1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
          },
          {
            "Expression": "(((a0_latency * a0_requests)) / (a0_requests)) * 1000",
            "Id": "a",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((b0_latency * b0_requests)) / (b0_requests)) * 1000",
            "Id": "b",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((c0_latency * c0_requests)) / (c0_requests)) * 1000",
            "Id": "c",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 3,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "ServiceToken": {
          "Fn::GetAtt": [
            "basicserviceavailabilityzonemapperAvailabilityZoneMapperFunction44B51BCC",
            "Arn",
          ],
        },
      },
      "Type": "AWS::CloudFormation::CustomResource",
      "UpdateReplacePolicy": "Delete",
    },
    "basicserviceavailabilityzonemapperAvailabilityZoneMapperFunction44B51BCC": {
      "DependsOn": [
        "basicserviceavailabilityzonemapperexecutionRoleDefaultPolicy8825A923",
        "basicserviceavailabilityzonemapperexecutionRole4D168772",
      ],
      "Properties": {
        "Architectures": [
          "arm64",
        ],
        "Code": {
          "ZipFile": "# Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
# SPDX-License-Identifier: Apache-2.0
import urllib3
import json
import os
import boto3

SUCCESS = "SUCCESS"
FAILED = "FAILED"
http = urllib3.PoolManager()
region = os.environ.get("AWS_REGION")
ec2 = boto3.client('ec2', region_name = region)

def handler(event, context):
  try:
    print(event)
    if event['RequestType'] == 'Delete':
      sendResponse(event, context, SUCCESS, {})
      return
  
    zone_names=[]
    if 'ResourceProperties' in event and 'AvailabilityZones' in event['ResourceProperties'] and event['ResourceProperties']['AvailabilityZones'] != '':   
      zone_names = event['ResourceProperties']['AvailabilityZones']
      
    in_use_azs = ec2.describe_availability_zones(Filters=[ { 'Name': 'zone-type', 'Values': [ 'availability-zone'] } ], ZoneNames = zone_names)
    all_azs = ec2.describe_availability_zones(Filters=[ { 'Name': 'zone-type', 'Values': [ 'availability-zone'] } ])
  
    az_map = {}

    biggest_letter = sorted([x["ZoneName"][-1] for x in all_azs["AvailabilityZones"]], reverse=True)[0]
    biggest_number = int(sorted([x["ZoneId"][-1] for x in all_azs["AvailabilityZones"]], reverse=True)[0])

    for code in range(ord('a'), ord(biggest_letter) + 1):
      az_map[chr(code)] = ""

    for num in range(1, biggest_number + 1):
      az_map["az" + str(num)] = ""
  
    # Supply the region and get its shorthand
    az_map[region] = all_azs["AvailabilityZones"][0]["ZoneId"].split("-")[0]
  
    # Get the in use availability zone Ids as comma delimited list
    az_map["InUseAvailabilityZoneIds"] = ",".join(x["ZoneId"] for x in in_use_azs["AvailabilityZones"])
  
    # Get the in use availability zone Ids as an array
    az_map["InUseAvailabilityZoneIdsArray"] = [x["ZoneId"] for x in in_use_azs["AvailabilityZones"]]
  
    # Get the in use availability zone names as comma delimited list
    az_map["InUseAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in in_use_azs["AvailabilityZones"])
  
    # Get the in use availability zone names as an array
    az_map["InUseAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in in_use_azs["AvailabilityZones"])
  
    # Make a comma delimited list of name to id joined with a colon
    az_map["InUseAvailabilityZoneNameToIdMap"] = ",".join(x["ZoneName"] + ":" + x["ZoneId"] for x in in_use_azs["AvailabilityZones"])
    
    # Make a comma delimited list of name to id joined with a colon for all AZs
    az_map["AllAvailabilityZoneNameToIdMap"] = ",".join(x["ZoneName"] + ":" + x["ZoneId"] for x in all_azs["AvailabilityZones"])
    
    # All availability zones in the region
    az_map["AllAvailabilityZoneIds"] = ",".join(x["ZoneId"] for x in all_azs["AvailabilityZones"])
    az_map["AllAvailabilityZoneIdsArray"] = [x["ZoneId"] for x in all_azs["AvailabilityZones"]]
    az_map["AllAvailabilityZoneNames"] = ",".join(x["ZoneName"] for x in all_azs["AvailabilityZones"])
    az_map["AllAvailabilityZoneNamesArray"] = [x["ZoneName"] for x in all_azs["AvailabilityZones"]]
    
    # Allow lookups for individual AZ names to Ids
    for item in all_azs['AvailabilityZones']:
      az_map[item['ZoneName']] = item['ZoneId']
      az_map[item['ZoneId']] = item['ZoneName']
      az_id = item['ZoneId'].split('-')[1].lower()
      az_map[az_id] = item['ZoneName']
      az_letter = item['ZoneName'][-1]
      az_map[az_letter] = item['ZoneId']
  
    print(json.dumps(az_map))
  
    sendResponse(event, context, SUCCESS, az_map)
  except Exception as e:
    print(e)
    sendResponse(event, context, FAILED, str(e))  
  return

def sendResponse(event, context, responseStatus, responseData, physicalResourceId=None, noEcho=False, reason=None):
  responseUrl = event['ResponseURL']
  print(responseUrl)
  responseBody = {
    'Status' : responseStatus,
    'Reason' : reason or "See the details in CloudWatch Log Stream: {}".format(context.log_stream_name),
    'PhysicalResourceId' : physicalResourceId or context.log_stream_name,
    'StackId' : event['StackId'],
    'RequestId' : event['RequestId'],
    'LogicalResourceId' : event['LogicalResourceId'],
    'NoEcho' : noEcho,
    'Data' : responseData
  }
  json_responseBody = json.dumps(responseBody, default=str)
  print("Response body:")
  print(json_responseBody)
  headers = {
    'content-type' : '',
    'content-length' : str(len(json_responseBody))
  }
  try:
    response = http.request('PUT', responseUrl, headers=headers, body=json_responseBody)
    print("Status code:", response.status)
  except Exception as e:
    print("send(...) failed executing http.request(..):", e)",
        },
        "Environment": {
          "Variables": {
            "PARTITION": {
              "Ref": "AWS::Partition",
            },
            "REGION": {
              "Ref": "AWS::Region",
            },
          },
        },
        "Handler": "index.handler",
        "MemorySize": 512,
        "Role": {
          "Fn::GetAtt": [
            "basicserviceavailabilityzonemapperexecutionRole4D168772",
            "Arn",
          ],
        },
        "Runtime": "python3.13",
        "Timeout": 20,
        "TracingConfig": {
          "Mode": "Active",
        },
      },
      "Type": "AWS::Lambda::Function",
    },
    "basicserviceavailabilityzonemapperCloudWatchManagedPolicyDD62D483": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "cloudwatch:PutMetricData",
              "Effect": "Allow",
              "Resource": "*",
            },
            {
              "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition",
                    },
                    ":logs:",
                    {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId",
                    },
                    ":log-group:",
                    {
                      "Ref": "basicserviceavailabilityzonemapperLogGroup94730F4B",
                    },
                    ":*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Roles": [
          {
            "Ref": "basicserviceavailabilityzonemapperexecutionRole4D168772",
          },
        ],
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "basicserviceavailabilityzonemapperEC2ManagedPolicy23CFFB92": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "ec2:DescribeAvailabilityZones",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "basicserviceavailabilityzonemapperLogGroup94730F4B": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "LogGroupName": {
          "Fn::Join": [
            "",
            [
              "/aws/lambda/",
              {
                "Ref": "basicserviceavailabilityzonemapperAvailabilityZoneMapperFunction44B51BCC",
              },
            ],
          ],
        },
        "RetentionInDays": 1,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "basicserviceavailabilityzonemapperXrayManagedPolicyDA6F1E3C": {
      "Properties": {
        "Description": "",
        "Path": "/azmapper/",
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
                "xray:GetSamplingRules",
                "xray:GetSamplingTargets",
                "xray:GetSamplingStatisticSummaries",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::IAM::ManagedPolicy",
    },
    "basicserviceavailabilityzonemapperexecutionRole4D168772": {
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": [
          {
            "Ref": "basicserviceavailabilityzonemapperXrayManagedPolicyDA6F1E3C",
          },
          {
            "Ref": "basicserviceavailabilityzonemapperEC2ManagedPolicy23CFFB92",
          },
        ],
        "Path": "/azmapper/",
      },
      "Type": "AWS::IAM::Role",
    },
    "basicserviceavailabilityzonemapperexecutionRoleDefaultPolicy8825A923": {
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "xray:PutTraceSegments",
                "xray:PutTelemetryRecords",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "basicserviceavailabilityzonemapperexecutionRoleDefaultPolicy8825A923",
        "Roles": [
          {
            "Ref": "basicserviceavailabilityzonemapperexecutionRole4D168772",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "basicservicebalbimpactcompositealarm7CF034FA": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-alb-impact-composite-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicebcompositeimpactalarmA97A5876",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicservicebcompositeimpactalarmA97A5876": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerName",
                ],
              },
              "-latency-or-availability-impact",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "((ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicebfaultratealarm5F186E5E",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicehavailabilityoutlieralarm86687B5C",
                  "Arn",
                ],
              },
              "")) OR (ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceblatencyalarm29DE2B8E",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceblatencyoutlieralarmDC41CF0C",
                  "Arn",
                ],
              },
              "")))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicservicebfaultratealarm5F186E5E": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-fault-rate",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(b1/b2)*100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-rate",
                ],
              ],
            },
          },
          {
            "Id": "b1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "b2",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicebisolatedimpactalarmDE0095CD": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-isolated-impact-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicebalbimpactcompositealarm7CF034FA",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicserviceblatencyalarm29DE2B8E": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Id": "m1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0.5,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicserviceblatencyoutlieralarmDC41CF0C": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(b - AVG([a,c])) / STDDEV([a,c])",
            "Id": "expr_1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
          },
          {
            "Expression": "(((a0_latency * a0_requests)) / (a0_requests)) * 1000",
            "Id": "a",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((b0_latency * b0_requests)) / (b0_requests)) * 1000",
            "Id": "b",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((c0_latency * c0_requests)) / (c0_requests)) * 1000",
            "Id": "c",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 3,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicecalbimpactcompositealarmD87D95E1": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-alb-impact-composite-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceccompositeimpactalarm99FF76E7",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicserviceccompositeimpactalarm99FF76E7": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-",
              {
                "Fn::GetAtt": [
                  "alb8A8B13C2",
                  "LoadBalancerName",
                ],
              },
              "-latency-or-availability-impact",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "((ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicecfaultratealarm5D2FA474",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceiavailabilityoutlieralarmB274B131",
                  "Arn",
                ],
              },
              "")) OR (ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceclatencyalarmC845E9BB",
                  "Arn",
                ],
              },
              "") AND ALARM("",
              {
                "Fn::GetAtt": [
                  "basicserviceclatencyoutlieralarmA29505F8",
                  "Arn",
                ],
              },
              "")))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicservicecfaultratealarm5D2FA474": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-fault-rate",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(c1/c2)*100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-rate",
                ],
              ],
            },
          },
          {
            "Id": "c1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c2",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 1,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicecisolatedimpactalarm0B047C13": {
      "Properties": {
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-isolated-impact-alarm",
            ],
          ],
        },
        "AlarmRule": {
          "Fn::Join": [
            "",
            [
              "(ALARM("",
              {
                "Fn::GetAtt": [
                  "basicservicecalbimpactcompositealarmD87D95E1",
                  "Arn",
                ],
              },
              ""))",
            ],
          ],
        },
      },
      "Type": "AWS::CloudWatch::CompositeAlarm",
    },
    "basicserviceclatencyalarmC845E9BB": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Id": "m1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": true,
          },
        ],
        "Threshold": 0.5,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicserviceclatencyoutlieralarmA29505F8": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-latency-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(c - AVG([a,b])) / STDDEV([a,b])",
            "Id": "expr_1",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
          },
          {
            "Expression": "(((a0_latency * a0_requests)) / (a0_requests)) * 1000",
            "Id": "a",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "a0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "a",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((b0_latency * b0_requests)) / (b0_requests)) * 1000",
            "Id": "b",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "b0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "b",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
          {
            "Expression": "(((c0_latency * c0_requests)) / (c0_requests)) * 1000",
            "Id": "c",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_requests",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "RequestCount",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c0_latency",
            "Label": {
              "Fn::GetAtt": [
                "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                "c",
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "TargetResponseTime",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "p99",
              "Unit": "Seconds",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 3,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicegavailabilityoutlieralarm21B8E187": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "a",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-availability-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(b1/(b1+d1+f1)) * 100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-percent-of-faults",
                ],
              ],
            },
          },
          {
            "Expression": "FILL(a1, 0) + FILL(a2, 0)",
            "Id": "b1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "a1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "a2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(c1, 0) + FILL(c2, 0)",
            "Id": "d1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "c1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(e1, 0) + FILL(e2, 0)",
            "Id": "f1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "e1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "e2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "a",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "a",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 66,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicservicehavailabilityoutlieralarm86687B5C": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "b",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-availability-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(e1/(c1+e1+g1)) * 100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-percent-of-faults",
                ],
              ],
            },
          },
          {
            "Expression": "FILL(b1, 0) + FILL(b2, 0)",
            "Id": "c1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "b1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "b2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(d1, 0) + FILL(d2, 0)",
            "Id": "e1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "d1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "d2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(f1, 0) + FILL(f2, 0)",
            "Id": "g1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "f1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "f2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "b",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "b",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 66,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "basicserviceiavailabilityoutlieralarmB274B131": {
      "Properties": {
        "ActionsEnabled": false,
        "AlarmName": {
          "Fn::Join": [
            "",
            [
              {
                "Fn::GetAtt": [
                  "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                  "c",
                ],
              },
              "-",
              {
                "Ref": "alb8A8B13C2",
              },
              "-availability-impact-outlier",
            ],
          ],
        },
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 2,
        "EvaluationPeriods": 3,
        "Metrics": [
          {
            "Expression": "(h1/(d1+f1+h1)) * 100",
            "Id": "expr_1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-percent-of-faults",
                ],
              ],
            },
          },
          {
            "Expression": "FILL(c1, 0) + FILL(c2, 0)",
            "Id": "d1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "c1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "c2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(e1, 0) + FILL(e2, 0)",
            "Id": "f1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "e1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "e2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Expression": "FILL(g1, 0) + FILL(g2, 0)",
            "Id": "h1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-",
                  {
                    "Ref": "alb8A8B13C2",
                  },
                  "-fault-count",
                ],
              ],
            },
            "ReturnData": false,
          },
          {
            "Id": "g1",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-target-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_Target_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
          {
            "Id": "g2",
            "Label": {
              "Fn::Join": [
                "",
                [
                  {
                    "Fn::GetAtt": [
                      "basicserviceavailabilityzonemapperAvailabilityZoneMapper9BFCD8FF",
                      "c",
                    ],
                  },
                  "-elb-5xx",
                ],
              ],
            },
            "MetricStat": {
              "Metric": {
                "Dimensions": [
                  {
                    "Name": "AvailabilityZone",
                    "Value": {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "AWS::Region",
                          },
                          "c",
                        ],
                      ],
                    },
                  },
                  {
                    "Name": "LoadBalancer",
                    "Value": {
                      "Fn::GetAtt": [
                        "alb8A8B13C2",
                        "LoadBalancerFullName",
                      ],
                    },
                  },
                ],
                "MetricName": "HTTPCode_ELB_5XX_Count",
                "Namespace": "AWS/ApplicationELB",
              },
              "Period": 60,
              "Stat": "Sum",
              "Unit": "Count",
            },
            "ReturnData": false,
          },
        ],
        "Threshold": 66,
        "TreatMissingData": "ignore",
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "bucketssmparameter3EED9276": {
      "Properties": {
        "Name": "BucketPath",
        "Type": "String",
        "Value": {
          "Fn::Sub": "s3://\${AssetsBucketName}/\${AssetsBucketPrefix}",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "codedeployNestedStackcodedeployNestedStackResource1B4E47D6": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "albhttplistener94AA0D76",
      ],
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
          "referencetoSnapshotTestStackAssetsBucketPrefix9C8E1544Ref": {
            "Ref": "AssetsBucketPrefix",
          },
          "referencetoSnapshotTestStackec2NestedStackec2NestedStackResource0606DBBCOutputsSnapshotTestStackec2FrontEndASG88946626Ref": {
            "Fn::GetAtt": [
              "ec2NestedStackec2NestedStackResourceD77757F5",
              "Outputs.SnapshotTestStackec2FrontEndASG88946626Ref",
            ],
          },
          "referencetoSnapshotTestStackec2NestedStackec2NestedStackResource0606DBBCOutputsSnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName": {
            "Fn::GetAtt": [
              "ec2NestedStackec2NestedStackResourceD77757F5",
              "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
            ],
          },
          "referencetoSnapshotTestStackmultiazobservabilityNestedStackmultiazobservabilityNestedStackResource56B25248OutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceHomeOperationAlarmsAndRulesNestedStackNestedStackHomeOperationAlarmsAndC1384643": {
            "Fn::GetAtt": [
              "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7",
              "Outputs.SnapshotTestStackmultiazobservabilityinstrumentedserviceHomeOperationAlarmsAndRulesNestedStackNestedStackHomeOperationAlarmsAndRulesNestedStackNestedStackResource9684F532OutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceHomeOpe5C3CF0C3",
            ],
          },
          "referencetoSnapshotTestStackmultiazobservabilityNestedStackmultiazobservabilityNestedStackResource56B25248OutputsSnapshotTestStackmultiazobservabilityinstrumentedservicePayOperationAlarmsAndRulesNestedStackNestedStackPayOperationAlarmsAndRuC638CDE8": {
            "Fn::GetAtt": [
              "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7",
              "Outputs.SnapshotTestStackmultiazobservabilityinstrumentedservicePayOperationAlarmsAndRulesNestedStackNestedStackPayOperationAlarmsAndRulesNestedStackNestedStackResource12E5B5EFOutputsSnapshotTestStackmultiazobservabilityinstrumentedservicePayOperatDCB926C5",
            ],
          },
          "referencetoSnapshotTestStackmultiazobservabilityNestedStackmultiazobservabilityNestedStackResource56B25248OutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceRideOperationAlarmsAndRulesNestedStackNestedStackRideOperationAlarmsAnd860AB9D6": {
            "Fn::GetAtt": [
              "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7",
              "Outputs.SnapshotTestStackmultiazobservabilityinstrumentedserviceRideOperationAlarmsAndRulesNestedStackNestedStackRideOperationAlarmsAndRulesNestedStackNestedStackResource0F0C1E31OutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceRideOpe8F233516",
            ],
          },
          "referencetoSnapshotTestStackmultiazobservabilityNestedStackmultiazobservabilityNestedStackResource56B25248OutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceSigninOperationAlarmsAndRulesNestedStackNestedStackSigninOperationAlarm8633C5BD": {
            "Fn::GetAtt": [
              "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7",
              "Outputs.SnapshotTestStackmultiazobservabilityinstrumentedserviceSigninOperationAlarmsAndRulesNestedStackNestedStackSigninOperationAlarmsAndRulesNestedStackNestedStackResource4CB5BF1AOutputsSnapshotTestStackmultiazobservabilityinstrumentedserviceSig7E3F5A66",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/b20cb74ddb0ad38364c60edb7cbb358cc6a0e244027198c4a6935a8413643039.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "databaseNestedStackdatabaseNestedStackResourceF5AAE956": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "networkNestedStacknetworkNestedStackResource8842CEE2",
      ],
      "Properties": {
        "Parameters": {
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcC5222FE1CidrBlock": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcC5222FE1CidrBlock",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcC5222FE1Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcC5222FE1Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/2022aecfb6827294386d45a5240cd0fb195b6e334a2a38e18f0af72712e2f135.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "ec2NestedStackec2NestedStackResourceD77757F5": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "aztaggerNestedStackaztaggerNestedStackResource5BE7FF15",
      ],
      "Properties": {
        "Parameters": {
          "referencetoSnapshotTestStackalbsecuritygroup5028A046GroupId": {
            "Fn::GetAtt": [
              "albsecuritygroup4B3C20F7",
              "GroupId",
            ],
          },
          "referencetoSnapshotTestStackdatabaseNestedStackdatabaseNestedStackResource3070BA4BOutputsSnapshotTestStackdatabaseSecretAttachment7D820EADRef": {
            "Fn::GetAtt": [
              "databaseNestedStackdatabaseNestedStackResourceF5AAE956",
              "Outputs.SnapshotTestStackdatabaseSecretAttachment7D820EADRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcC5222FE1Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcC5222FE1Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/987114b0b6066f519afde1ffc3fbb9b082b34571621c08d2f1490a55eab05d52.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "eksNestedStackeksNestedStackResource518D71CA": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "aztaggerNestedStackaztaggerNestedStackResource5BE7FF15",
        "frontendloggroup0047D9DD",
        "networkNestedStacknetworkNestedStackResource8842CEE2",
      ],
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
          "referencetoSnapshotTestStackParticipantRoleNameA8F33A70Ref": {
            "Ref": "ParticipantRoleName",
          },
          "referencetoSnapshotTestStackalbsecuritygroup5028A046GroupId": {
            "Fn::GetAtt": [
              "albsecuritygroup4B3C20F7",
              "GroupId",
            ],
          },
          "referencetoSnapshotTestStackdatabaseNestedStackdatabaseNestedStackResource3070BA4BOutputsSnapshotTestStackdatabaseSecret868C9B37Ref": {
            "Fn::GetAtt": [
              "databaseNestedStackdatabaseNestedStackResourceF5AAE956",
              "Outputs.SnapshotTestStackdatabaseSecret868C9B37Ref",
            ],
          },
          "referencetoSnapshotTestStackdatabaseNestedStackdatabaseNestedStackResource3070BA4BOutputsSnapshotTestStackdatabaseSecretAttachment7D820EADRef": {
            "Fn::GetAtt": [
              "databaseNestedStackdatabaseNestedStackResourceF5AAE956",
              "Outputs.SnapshotTestStackdatabaseSecretAttachment7D820EADRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcC5222FE1Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcC5222FE1Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/a313a2ad88aa119fb558772c3dcf73c12229cd395c3f88e4316b422999e83a25.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "eksalbroutes3424C402": {
      "Properties": {
        "Actions": [
          {
            "TargetGroupArn": {
              "Fn::GetAtt": [
                "eksNestedStackeksNestedStackResource518D71CA",
                "Outputs.SnapshotTestStackeksEKSAppAppTargetGroup335A6FA8Ref",
              ],
            },
            "Type": "forward",
          },
        ],
        "Conditions": [
          {
            "Field": "path-pattern",
            "PathPatternConfig": {
              "Values": [
                "/home",
                "/signin",
              ],
            },
          },
        ],
        "ListenerArn": {
          "Ref": "albhttplistener94AA0D76",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "failingdeploymentassetCA3DCDCA": {
      "Properties": {
        "Name": "DeploymentAsset",
        "Type": "String",
        "Value": {
          "Fn::Sub": "s3://\${AssetsBucketName}/\${AssetsBucketPrefix}app_deploy_fail.zip",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "referencetoSnapshotTestStackdatabaseNestedStackdatabaseNestedStackResource3070BA4BOutputsSnapshotTestStackdatabaseFECCA855EndpointAddress": {
            "Fn::GetAtt": [
              "databaseNestedStackdatabaseNestedStackResourceF5AAE956",
              "Outputs.SnapshotTestStackdatabaseFECCA855EndpointAddress",
            ],
          },
          "referencetoSnapshotTestStackec2NestedStackec2NestedStackResource0606DBBCOutputsSnapshotTestStackec2FrontEndASG88946626Ref": {
            "Fn::GetAtt": [
              "ec2NestedStackec2NestedStackResourceD77757F5",
              "Outputs.SnapshotTestStackec2FrontEndASG88946626Ref",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/fa83d23faf10b65df31ed73e825cd0e59de2646967be52a35f296c406a02aee5.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "frontendloggroup0047D9DD": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "LogGroupName": "/multi-az-workshop/frontend",
        "RetentionInDays": 7,
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Delete",
    },
    "logqueryNestedStacklogqueryNestedStackResourceE0647B60": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "referencetoSnapshotTestStackazmapperAvailabilityZoneMapper0319EED7a": {
            "Fn::GetAtt": [
              "azmapperAvailabilityZoneMapper3A75675D",
              "a",
            ],
          },
          "referencetoSnapshotTestStackazmapperAvailabilityZoneMapper0319EED7b": {
            "Fn::GetAtt": [
              "azmapperAvailabilityZoneMapper3A75675D",
              "b",
            ],
          },
          "referencetoSnapshotTestStackazmapperAvailabilityZoneMapper0319EED7c": {
            "Fn::GetAtt": [
              "azmapperAvailabilityZoneMapper3A75675D",
              "c",
            ],
          },
          "referencetoSnapshotTestStackfrontendloggroupBF3CCB3ARef": {
            "Ref": "frontendloggroup0047D9DD",
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/af079c6b43d07b7bb61000e5df7b1285dbde01aace6578da0ccbc381f3a5fc6b.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "multiazobservabilityNestedStackmultiazobservabilityNestedStackResourceA56253B7": {
      "DeletionPolicy": "Delete",
      "DependsOn": [
        "networkNestedStacknetworkNestedStackResource8842CEE2",
      ],
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
          "referencetoSnapshotTestStackalbC4932F6CDNSName": {
            "Fn::GetAtt": [
              "alb8A8B13C2",
              "DNSName",
            ],
          },
          "referencetoSnapshotTestStackalbC4932F6CLoadBalancerFullName": {
            "Fn::GetAtt": [
              "alb8A8B13C2",
              "LoadBalancerFullName",
            ],
          },
          "referencetoSnapshotTestStackalbC4932F6CRef": {
            "Ref": "alb8A8B13C2",
          },
          "referencetoSnapshotTestStackec2NestedStackec2NestedStackResource0606DBBCOutputsSnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName": {
            "Fn::GetAtt": [
              "ec2NestedStackec2NestedStackResourceD77757F5",
              "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupFullName",
            ],
          },
          "referencetoSnapshotTestStackec2NestedStackec2NestedStackResource0606DBBCOutputsSnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName": {
            "Fn::GetAtt": [
              "ec2NestedStackec2NestedStackResourceD77757F5",
              "Outputs.SnapshotTestStackec2frontendtargetgroup40F9C2F3TargetGroupName",
            ],
          },
          "referencetoSnapshotTestStackfrontendloggroupBF3CCB3ARef": {
            "Ref": "frontendloggroup0047D9DD",
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcC5222FE1Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcC5222FE1Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet1Subnet244F4BEDRef",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet2Subnet9FAF09A7Ref",
            ],
          },
          "referencetoSnapshotTestStacknetworkNestedStacknetworkNestedStackResource590805DFOutputsSnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref": {
            "Fn::GetAtt": [
              "networkNestedStacknetworkNestedStackResource8842CEE2",
              "Outputs.SnapshotTestStacknetworkvpcisolatedsubnetSubnet3SubnetBDE99C49Ref",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/50e9abc9062ad397d03d5cf0d3eedbfffca4db201c158f6ffce34d1fec4cee12.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "networkNestedStacknetworkNestedStackResource8842CEE2": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/27ae1874e14a98f74d02c3e28b47f081136fed3044749afa2252b94b4b688ff3.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
    "regionparameterE7FC0AC6": {
      "Properties": {
        "Name": "Region",
        "Type": "String",
        "Value": {
          "Ref": "AWS::Region",
        },
      },
      "Type": "AWS::SSM::Parameter",
    },
    "ssmrandomfaultNestedStackssmrandomfaultNestedStackResource5028F605": {
      "DeletionPolicy": "Delete",
      "Properties": {
        "Parameters": {
          "AssetsBucketName": {
            "Ref": "AssetsBucketName",
          },
          "AssetsBucketPrefix": {
            "Ref": "AssetsBucketPrefix",
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz0LatencyTemplate45994DFARef": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz0LatencyTemplate45994DFARef",
            ],
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz0PacketLossTemplate1B5C2941Ref": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz0PacketLossTemplate1B5C2941Ref",
            ],
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz1LatencyTemplate67D33204Ref": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz1LatencyTemplate67D33204Ref",
            ],
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz1PacketLossTemplate62761B0ARef": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz1PacketLossTemplate62761B0ARef",
            ],
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz2LatencyTemplate5F06D4AERef": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz2LatencyTemplate5F06D4AERef",
            ],
          },
          "referencetoSnapshotTestStackfaultinjectionNestedStackfaultinjectionNestedStackResourceB470030EOutputsSnapshotTestStackfaultinjectionaz2PacketLossTemplateD653A4BDRef": {
            "Fn::GetAtt": [
              "faultinjectionNestedStackfaultinjectionNestedStackResource3FED329D",
              "Outputs.SnapshotTestStackfaultinjectionaz2PacketLossTemplateD653A4BDRef",
            ],
          },
        },
        "TemplateURL": {
          "Fn::Join": [
            "",
            [
              "https://s3.us-east-1.",
              {
                "Ref": "AWS::URLSuffix",
              },
              "/",
              {
                "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-us-east-1",
              },
              "/ad3c86ed9f8b41a263fc541017108f8ce6eff5196d26f21627547d784276739d.json",
            ],
          ],
        },
      },
      "Type": "AWS::CloudFormation::Stack",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;
